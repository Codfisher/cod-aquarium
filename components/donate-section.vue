<template>
  <div class="p-4 border rounded-xl mb-10 vp-doc">
    <div class="">
      æœ‰ä»»ä½•å»ºè­°æˆ–ç–‘å•å—ï¼Ÿæ­¡è¿
      <a
        href="mailto:hi@codlin.me"
        target="_blank"
      >
        å¯«ä¿¡çµ¦æˆ‘
      </a>

      <span class="text-nowrap">( Â´ â–½ ` )ï¾‰</span>
    </div>

    <br>

    å¦‚æœæˆ‘çš„æ–‡ç« å°æ‚¨æœ‰æ‰€å•Ÿç™¼æˆ–å¹«åŠ©ï¼Œæ­¡è¿ã€Œ
    <a
      href="https://portaly.cc/codfish/support"
      target="_blank"
    >
      è«‹æˆ‘å–ä¸€æ¯å’–å•¡
    </a>

    ã€æˆ–èŠ± 10 ç§’ç™»å…¥ LikeCoin æŒ‰ä¸‹æ–¹æŒ‰éˆ•æ‹æ‰‹é¼“å‹µæˆ‘å–”ï¼

    <client-only>
      <iframe
        :key="src"
        scrolling="no"
        frameborder="0"
        :src
        class="my-4 rounded-xl"
        @click="handleLikeClick"
      />
    </client-only>

    <div class=" text-center p-4 bg-slate-50 rounded-xl text-lg text-gray-600">
      é±ˆé­šæ„Ÿè¬æ‚¨ï¼ <span class="text-nowrap">(Â´â–½`ÊƒğŸ’–Æª)</span>
    </div>
  </div>
</template>

<script setup lang="ts">
import { pipe } from 'remeda'
import { useRoute } from 'vitepress'
import { computed } from 'vue'

const route = useRoute()

const referrer = computed(() => {
  /** é˜²æ­¢ SSR éšæ®µå‡ºç¾ window ä¸å­˜åœ¨
   *
   * https://github.com/vuejs/vitepress/issues/1689
   */
  if (import.meta.env.SSR) {
    return ''
  }

  return pipe(
    window?.location?.href ?? route.path,
    (value) => encodeURIComponent(value.replace('.html', '')),
  )
})

const src = computed(() => `https://button.like.co/in/embed/codlin/button?referrer=${referrer.value}`)

function handleLikeClick() {
  console.log('ğŸš€ ~ handleLikeClick:')

  // https://api.like.co/like/info?url=
}
</script>

<style scoped lang="sass">
</style>
