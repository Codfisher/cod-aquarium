---
title: è—‰ç”± Sentry è®“éŒ¯èª¤ç„¡æ‰€éå½¢å§ï¼
description: ç³»çµ±ä¸Šç·šå¾Œå¸¸å¸¸é‡åˆ°å‰ç«¯éŒ¯èª¤ä¸å¥½è¿½è¹¤å•é¡Œï¼Œä½¿ç”¨è€…å¾ˆé›£èªªå¾—æ¸…æ¥šç™¼ç”Ÿç”šéº¼äº‹ï¼ŒSentry å¯ä»¥å”åŠ©è¨˜éŒ„éŒ¯èª¤ï¼Œä¸¦ä¸”æä¾›æ›´å¤šè³‡è¨Šï¼Œè®“é–‹ç™¼è€…æ›´å®¹æ˜“è¿½è¹¤å•é¡Œã€‚
tags: ['Front-End']
image: https://codlin.me/make-mistakes-invisible-with-sentry.webp
date: 20240826
---

# è—‰ç”± Sentry è®“éŒ¯èª¤ç„¡æ‰€éå½¢å§ï¼

![make-mistakes-invisible-with-sentry](/make-mistakes-invisible-with-sentry.webp){height="600"}

ç³»çµ±ä¸Šç·šå¾Œå¸¸å¸¸é‡åˆ°å‰ç«¯éŒ¯èª¤ä¸å¥½è¿½è¹¤ã€é›£ä»¥é‡ç¾ã€‚

ä½¿ç”¨è€…ä¹Ÿå¾ˆé›£èªªå¾—æ¸…æ¥šèŠ±é»‘å™´ã€‚( Â´â€¢Ì¥Ì¥Ì¥ Ï‰ â€¢Ì¥Ì¥Ì¥` )

<br>

é±ˆé­šï¼šã€Œåªå¥½é»˜é»˜åœ°å¿½ç•¥ã€‚Ô…( Ë˜Ï‰Ë˜Ô…)ã€

è·¯äººï¼šã€Œä¸è¦äº‚æ•™å•Šï¼Î£(ËŠĞ”Ë‹;)ã€

<br>

é€™å€‹æ™‚å€™ Sentry å°±å¯ä»¥ç™»å ´äº†ï¼

## Sentry æ˜¯ä»€éº¼ï¼Ÿ

Sentry æ˜¯ä¸€å€‹é–‹æºçš„éŒ¯èª¤è¿½è¹¤å·¥å…·ï¼Œå¯ä»¥å¹«åŠ©é–‹ç™¼è€…è¿½è¹¤éŒ¯èª¤ï¼Œä¸¦ä¸”æä¾›æ›´å¤šè³‡è¨Šï¼Œè®“é–‹ç™¼è€…æ›´å®¹æ˜“è¿½è¹¤å•é¡Œã€‚

ä¸åªæœ‰ JavaScriptï¼Œé‚„æ”¯æ´ Pythonã€Javaã€PHPã€Ruby ç­‰ç­‰å¤šå€‹èªè¨€ï¼Œç”šè‡³æ”¯æ´ Unityã€Unreal Engine ç­‰ç­‰ã€‚

ç”±æ–¼ç›®å‰çœ‹ä¾† Sentry å¸‚å ç‡æœ€é«˜é‚„å¯ä»¥è‡ªè¨—ç®¡ï¼Œæ‰€ä»¥å„ªå…ˆä¾†è©¦è©¦ Sentryã€‚

## è¨­å®š Sentry

ä»¥ä¸‹æˆ‘å€‘ä»¥ Vue ç‚ºä¾‹ï¼Œä¾ç…§[æ–‡ä»¶æŒ‡ç¤º](https://docs.sentry.io/platforms/javascript/guides/vue/#install)å®‰è£ã€è¨­å®šã€‚

ä¸»è¦ä¿®æ”¹ main.jsï¼ŒåŠ å…¥ Sentry åˆå§‹åŒ–è¨­å®šã€‚

```ts
import { createApp } from "vue";
import { createRouter } from "vue-router";
import * as Sentry from "@sentry/vue";

const app = createApp({ ... });
const router = createRouter({ ... });

Sentry.init({
  app,
  dsn: "https://xxxxxxxxxxxx@o4507587449978880.ingest.us.sentry.io/4507824142942208",
  integrations: [
    Sentry.browserTracingIntegration({ router }),
    Sentry.replayIntegration(),
  ],

  // Set tracesSampleRate to 1.0 to capture 100%
  // of transactions for tracing.
  // We recommend adjusting this value in production
  tracesSampleRate: 1.0,

  // Set `tracePropagationTargets` to control for which URLs trace propagation should be enabled
  tracePropagationTargets: ["localhost", /^https:\/\/yourserver\.io\/api/],

  // Capture Replay for 10% of all sessions,
  // plus for 100% of sessions with an error
  replaysSessionSampleRate: 0.1,
  replaysOnErrorSampleRate: 1.0,
});

app.use(router);
app.mount("#app");
```

æ¥è‘—è¨­å®šè‡ªå‹•ä¸Šå‚³ sourcemapsï¼Œå°±å¯ä»¥åœ¨æ¯æ¬¡åŸ·è¡Œ npm run buildï¼Œéƒ½æœƒè‡ªå‹•ä¸Šå‚³ sourcemapsã€‚

åŸ·è¡Œè¨­å®šå¼•å°ç²¾éˆï¼š

```bash
npx @sentry/wizard@latest -i sourcemaps
```

ä¸¦æ ¹æ“šæç¤ºè¨­å®šï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼

## ç´€éŒ„ã€æŸ¥çœ‹éŒ¯èª¤

è®“æˆ‘å€‘å¯¦éš›è§¸ç™¼éŒ¯èª¤ï¼Œå»ºç«‹ä¸€å€‹æœƒ throw error çš„æŒ‰éˆ•ã€‚

```vue
<template>
  <div class="flex flex-col items-start gap-4 p-4">
    <q-btn
      icon="home"
      class="w-40"
      no-caps
      @click="throwError"
    >
      ç”¢ç”Ÿæ„å¤–éŒ¯èª¤
    </q-btn>
  </div>
</template>

<script setup lang="ts">
function throwError() {
  throw new Error('éŒ¯èª¤æ¸¬è©¦');
}
</script>
```

Sentry æ•æ‰åˆ°éŒ¯èª¤å¾Œï¼Œæœƒåˆ—åœ¨ Issues ä¸­ã€‚

![issues](/make-mistakes-invisible-with-sentry/issues.png)

## éŒ¯èª¤å ±å‘Š

é»é€²å»å¾Œå¯ä»¥çœ‹åˆ°è©³ç´°éŒ¯èª¤å…§å®¹ã€‚

![error-reports](/make-mistakes-invisible-with-sentry/error-reports.png)

### è£ç½®è³‡è¨Š

å¯ä»¥çœ‹çœ‹ç©¶ç«Ÿç”šéº¼è£ç½®è·‘å‡ºå°èŸ²èŸ²ã€‚( â€¢Ì€ Ï‰ â€¢Ì )âœ§

![device-info](/make-mistakes-invisible-with-sentry/device-info.png)

### éŒ¯èª¤ç¨‹å¼ç¢¼

æœ‰ä¸Šå‚³ sourcemaps çš„è©±ï¼Œå¯ä»¥ç²¾æº–åœ°çŸ¥é“ç™¼ç”ŸéŒ¯èª¤çš„ç¨‹å¼ç¢¼ã€‚

![error-code](/make-mistakes-invisible-with-sentry/error-code.png)

### éºµåŒ…å±‘

è©³ç´°è¨˜éŒ„æ“ä½œæµç¨‹ï¼Œé‚„å¯ä»¥è¨˜éŒ„æ¯å€‹æ­¥é©Ÿè€—æ™‚å¤šä¹…ã€API èŠ±è²»æ™‚é–“ç­‰ç­‰ã€‚

![breadcrumbs](/make-mistakes-invisible-with-sentry/breadcrumbs.png)

### ç•«é¢éŒ„å½±

æœ€å²å®³çš„éƒ¨åˆ†ä¾†äº†ï¼Œä¸åªæœ‰æ–‡å­—ç´€éŒ„ï¼Œç”šè‡³é‚„æœ‰ç•«é¢éŒ„å½±å–”ï¼Ë‹( Â° â–½ã€Â° )

![video-recording](/make-mistakes-invisible-with-sentry/video-recording.gif){format="gif"}

## å…¶ä»–ç´°ç¯€

### æ‰‹å‹•æŠ“å–éŒ¯èª¤

é™¤äº†è‡ªå‹•æŠ“å–éŒ¯èª¤å¤–ï¼Œä¹Ÿå¯ä»¥æ‰‹å‹•è¨˜éŒ„éŒ¯èª¤æˆ–è¨Šæ¯ã€‚

[Usage | Sentry for Vue](https://docs.sentry.io/platforms/javascript/guides/vue/usage/)

### æ›´è©³ç´°çš„è¨˜éŒ„

[Enriching Events | Sentry for Vue](https://docs.sentry.io/platforms/javascript/guides/vue/enriching-events/)

å¯ä»¥é‡å°äº‹ä»¶æä¾›é¡å¤–çš„ contextï¼Œæ›´æ–¹ä¾¿ debugã€‚

ä»¥ä¸‹èˆ‰å¹¾å€‹ä¾‹å­ï¼š

- [é™„ä»¶](https://docs.sentry.io/platforms/javascript/guides/vue/enriching-events/attachments/)ï¼šå¯ä»¥å„²å­˜è¢å¹•æˆªåœ–æˆ–ç‰¹å®šæª”æ¡ˆã€‚
- [ç­‰ç´š](https://docs.sentry.io/platforms/javascript/guides/vue/enriching-events/level/)ï¼šç´€éŒ„ç‰¹å®šç­‰ç´šçš„äº‹ä»¶ï¼Œæ–¹ä¾¿åˆ†ç´šè¿½è¹¤ã€‚
- [tag](https://docs.sentry.io/platforms/javascript/guides/vue/enriching-events/tags/)ï¼šæ–¹ä¾¿åˆ†é¡ç´€éŒ„ã€‚
- [ä½¿ç”¨è€…](https://docs.sentry.io/platforms/javascript/guides/vue/enriching-events/identify-user/)ï¼šå¯ä»¥è¨˜éŒ„éŒ¯èª¤ä¾†è‡ªå“ªå€‹ä½¿ç”¨è€…ã€‚

## ç¸½çµ ğŸŸ

- Sentry å¯ä»¥å¹«åŠ©é–‹ç™¼è€…è¿½è¹¤éŒ¯èª¤ï¼Œè®“é–‹ç™¼è€…æ›´å®¹æ˜“è¿½è¹¤å•é¡Œ
- Sentry å¯ä»¥è‡ªè¨—ç®¡ï¼Œä¹Ÿæœ‰æä¾›å…è²»æ–¹æ¡ˆ
- é™¤äº†éŒ¯èª¤è¨Šæ¯ï¼Œé‚„æœ‰è£ç½®ç´°ç¯€ã€æ“ä½œéŒ„å½±ç­‰ç­‰éå¸¸è©³ç›¡çš„è³‡è¨Š

Sentry é‚„æœ‰å…¶ä»–å¾ˆå¤šåŠŸèƒ½ï¼Œä¸éç›®å‰é€™æ¨£å°æˆ‘ä¾†èªªå¾ˆè¶³å¤ äº†ï¼Œæ­¡è¿å¤§å®¶æ›´æ·±å…¥çš„å˜—è©¦ã€‚

æ•´é«”ç”¨èµ·ä¾†çœŸçš„å¾ˆä¸éŒ¯ï¼Œå¾ˆå¼·å¾ˆæ–¹ä¾¿ã€‚(Â´â–½`Êƒâ™¡Æª)

ä¸éå¦‚æœä½ çš„ç¶²é æœ‰ SEO éœ€æ±‚ï¼Œè¦æ³¨æ„ Sentry æœƒå½±éŸ¿ SEO è·‘åˆ†ï¼Œå› ç‚ºéœ€è¦é¡å¤–è¼‰å…¥ JS è³‡æºï¼Œå°è‡´ TTFB è®Šå·®ã€‚

æ‰€ä»¥æˆ‘åªæœ‰åœ¨ App æˆ–å¾Œå°ç¶²é æ‰æœƒä½¿ç”¨ Sentryã€‚

ä»¥ä¸Šå…§å®¹ï¼Œå¸Œæœ›å°å¤§å®¶æœ‰å¹«åŠ©ã€‚

æœ‰å•é¡Œé‚„è«‹å¤šå¤šæŒ‡æ•™ã€‚(oï¾Ÿvï¾Ÿ)ãƒ
