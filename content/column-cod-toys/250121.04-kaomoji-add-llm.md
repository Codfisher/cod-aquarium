---
title: CodToys - EP04ï¼šè«‹æ”¯æ´è¿‘ç¾©è©æœå°‹
description: å¿˜è¨˜é¡æ–‡å­—çš„ tag æ€éº¼è¾¦ï¼Ÿè«‹æ”¯æ´è¿‘ç¾©è©æœå°‹ áƒš(â•¹Îµâ•¹áƒš)
tags: ['Electron', 'LLM']
image: https://codlin.me/cod-toys.webp
date: 20250122
---

# CodToys - EP04ï¼šè«‹æ”¯æ´è¿‘ç¾©è©æœå°‹

![å¿«æ¨‚å †ç©æœ¨çš„é­š](/cod-toys.webp){.cover}

ä¸Šä¸€ç« æˆ‘å€‘å¯ä»¥å¾ˆå¿«é€Ÿåœ°é¸æ“‡ç›®æ¨™é¡æ–‡å­—äº†ã€‚

ä½†æ˜¯æ—¥å­ä¹…äº†ï¼Œå¯èƒ½æœƒå¿˜è¨˜é¡æ–‡å­—çš„ tagï¼Œå°è‡´ä¸€æ™‚ä¸çŸ¥é“æ€éº¼æ‰¾åˆ°æƒ³è¦çš„é¡æ–‡å­—ã€‚%(â—œà¯°â—)%

<br>

è·¯äººï¼šã€Œè‡ªå·±æ–°å¢çš„ tag é‚„èƒ½å¿˜è¨˜å–”ï¼Ÿ%(â—‰â—à±ªâ—Ÿâ—‰ )%ã€

é±ˆé­šï¼šã€Œæˆ‘å°±é±ˆé­šè…¦ï¼Œä½ æœ‰æ„è¦‹è†©ï¼Ÿ%(;Â´à¼àº¶Ğ”à¼àº¶`)%ã€

<br>

æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£å°±å°±ä¾†æ”¯æ´è¿‘ç¾©è©æœå°‹å§ï¼Œé€™æ¨£å³ä½¿å¿˜è¨˜åŸæœ¬çš„ tagï¼Œä¹Ÿå¯ä»¥é€éç›¸è¿‘çš„å­—è©æ‰¾åˆ°æƒ³è¦çš„é¡æ–‡å­—äº†ï¼%ãƒ¾(â—'à±ª`â—)ï¾‰ï¾%

## é–‹ç™¼

æœ¬ç« ç¯€é è¨ˆæœƒå»ºç«‹ä»¥ä¸‹å…§å®¹ï¼š

- åœ¨ Electron ä¸­é‹è¡Œ LLM
- è®“ LLM å°æ¯å€‹é¡æ–‡å­—çš„ tag ç”¢ç”Ÿè¿‘ç¾©è©
- æ ¹æ“šè¿‘ç¾©è©æœå°‹ä¸¦é¡¯ç¤ºçµæœ

### ä¾†é‹è¡Œ LLM å§ï¼

é€™è£¡ä¾è³´ [`node-llama-cpp`](https://github.com/withcatai/node-llama-cpp) é€™å€‹å¥—ä»¶ï¼Œè—‰ç”±æ­¤å¥—ä»¶æˆ‘å€‘å¯ä»¥å¾ˆç°¡å–®çš„åœ¨ Node.js ä¸­é‹è¡Œ LLMã€‚

ç¨‹å¼ç¢¼å¾ˆå–®ç´”ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å¾®èª¿å®˜æ–¹ç¯„ä¾‹è€Œå·²ã€‚

```typescript
import path from 'node:path'
import { fileURLToPath } from 'node:url'
import chalk from 'chalk'
import { getLlama, LlamaChatSession, resolveModelFile } from 'node-llama-cpp'

const __dirname = path.dirname(fileURLToPath(import.meta.url))
const modelsDirectory = path.join(__dirname, '..', 'models')

const llama = await getLlama()

const qList = [
  'å¿«æ¨‚çš„ 10 å€‹ç¹é«”ä¸­æ–‡ã€10 å€‹è‹±æ–‡è¿‘ç¾©è©ï¼Œå…¨éƒ¨åˆä½µï¼Œé€—è™Ÿåˆ†éš”ï¼Œä¸è¦ä»»ä½•é™„åŠ è³‡è¨Šï¼Œä¸è¦æ¨™é¡Œï¼Œä¸éœ€è§£é‡‹',
  'æ…¶ç¥çš„ 10 å€‹ç¹é«”ä¸­æ–‡ã€10 å€‹è‹±æ–‡è¿‘ç¾©è©ï¼Œå…¨éƒ¨åˆä½µï¼Œé€—è™Ÿåˆ†éš”ï¼Œä¸è¦ä»»ä½•é™„åŠ è³‡è¨Šï¼Œä¸è¦æ¨™é¡Œï¼Œä¸éœ€è§£é‡‹',
  'ç™¼ç˜‹çš„ 10 å€‹ç¹é«”ä¸­æ–‡ã€10 å€‹è‹±æ–‡è¿‘ç¾©è©ï¼Œå…¨éƒ¨åˆä½µï¼Œé€—è™Ÿåˆ†éš”ï¼Œä¸è¦ä»»ä½•é™„åŠ è³‡è¨Šï¼Œä¸è¦æ¨™é¡Œï¼Œä¸éœ€è§£é‡‹'
]

{
  console.log(chalk.yellow('gemma: '))

  const modelPath = await resolveModelFile(
    'hf_bartowski_gemma-2-2b-it-Q6_K_L.gguf',
    modelsDirectory
  )

  const model = await llama.loadModel({ modelPath })
  const context = await model.createContext()
  const session = new LlamaChatSession({
    contextSequence: context.getSequence()
  })
  console.log()

  for (const q of qList) {
    const a = await session.prompt(q)
    console.log(a)
  }

  await model.dispose()
}

{
  console.log(chalk.yellow('llama: '))

  const modelPath = await resolveModelFile(
    'hf_mradermacher_Llama-3.2-3B-Instruct.Q6_K.gguf',
    modelsDirectory
  )

  const model = await llama.loadModel({ modelPath })
  const context = await model.createContext()
  const session = new LlamaChatSession({
    contextSequence: context.getSequence()
  })
  console.log()

  for (const q of qList) {
    const a = await session.prompt(q)
    console.log(a)
  }

  await model.dispose()
}
```

## ç¸½çµ ğŸŸ

ä»¥ä¸Šç¨‹å¼ç¢¼å¯ä»¥[åœ¨æ­¤å–å¾—](https://github.com/Codfisher/side-project-cod-toys/tree/feat/kaomoji-add-llm)
