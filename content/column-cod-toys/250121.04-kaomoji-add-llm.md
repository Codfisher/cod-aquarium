---
title: CodToys - EP04ï¼šè«‹æ”¯æ´è¿‘ç¾©è©æœå°‹
description: å¿˜è¨˜é¡æ–‡å­—çš„ tag æ€éº¼è¾¦ï¼Ÿè«‹æ”¯æ´è¿‘ç¾©è©æœå°‹ áƒš(â•¹Îµâ•¹áƒš)
tags: ['Electron', 'LLM']
image: https://codlin.me/cod-toys.webp
date: 20250122
---

# CodToys - EP04ï¼šè«‹æ”¯æ´è¿‘ç¾©è©æœå°‹

![å¿«æ¨‚å †ç©æœ¨çš„é­š](/cod-toys.webp){.cover}

ä¸Šä¸€ç« æˆ‘å€‘å¯ä»¥å¾ˆå¿«é€Ÿåœ°é¸æ“‡ç›®æ¨™é¡æ–‡å­—äº†ã€‚

ä½†æ˜¯æ—¥å­ä¹…äº†ï¼Œå¯èƒ½æœƒå¿˜è¨˜é¡æ–‡å­—çš„ tagï¼Œå°è‡´ä¸€æ™‚ä¸çŸ¥é“æ€éº¼æ‰¾åˆ°æƒ³è¦çš„é¡æ–‡å­—ã€‚%(â—œà¯°â—)%

<br>

è·¯äººï¼šã€Œè‡ªå·±æ–°å¢çš„ tag é‚„èƒ½å¿˜è¨˜å–”ï¼Ÿ%(â—‰â—à±ªâ—Ÿâ—‰ )%ã€

é±ˆé­šï¼šã€Œæˆ‘å°±é±ˆé­šè…¦ï¼Œä½ æœ‰æ„è¦‹è†©ï¼Ÿ%(;Â´à¼àº¶Ğ”à¼àº¶`)%ã€

<br>

æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£å°±å°±ä¾†æ”¯æ´è¿‘ç¾©è©æœå°‹å§ï¼Œé€™æ¨£å³ä½¿å¿˜è¨˜åŸæœ¬çš„ tagï¼Œä¹Ÿå¯ä»¥é€éç›¸è¿‘çš„å­—è©æ‰¾åˆ°æƒ³è¦çš„é¡æ–‡å­—äº†ï¼%ãƒ¾(â—'à±ª`â—)ï¾‰ï¾%

## é–‹ç™¼

æœ¬ç« ç¯€é è¨ˆæœƒå»ºç«‹ä»¥ä¸‹å…§å®¹ï¼š

- åœ¨ Electron ä¸­é‹è¡Œ LLM
- è®“ LLM å°æ¯å€‹é¡æ–‡å­—çš„ tag ç”¢ç”Ÿè¿‘ç¾©è©
- æ ¹æ“šè¿‘ç¾©è©æœå°‹ä¸¦é¡¯ç¤ºçµæœ

### ä¾†é‹è¡Œ LLM å§ï¼

é€™è£¡ä¾è³´ [`node-llama-cpp`](https://github.com/withcatai/node-llama-cpp) é€™å€‹å¥—ä»¶ï¼Œè—‰ç”±æ­¤å¥—ä»¶æˆ‘å€‘å¯ä»¥å¾ˆç°¡å–®çš„åœ¨ Node.js ä¸­é‹è¡Œ LLMã€‚

é€™è£¡é¸ç”¨å°å‹çš„æ¨¡å‹ï¼Œç›®å‰å¯¦éš›æ¸¬è©¦ `gemma-2-2b-it-Q6_K_L` å’Œ `Llama-3.2-3B-Instruct.Q6_K`ã€‚

ç¨‹å¼ç¢¼å¾ˆå–®ç´”ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å¾®èª¿å®˜æ–¹ç¯„ä¾‹è€Œå·²ã€‚

è®“æ¨¡å‹å›ç­”ç‰¹å®šå–®å­—çš„ä¸­è‹±æ–‡è¿‘ç¾©è©ï¼Œä¸¦å°‡çµæœé¡¯ç¤ºå‡ºä¾†ã€‚

```typescript
import path from 'node:path'
import { fileURLToPath } from 'node:url'
import chalk from 'chalk'
import { getLlama, LlamaChatSession, resolveModelFile } from 'node-llama-cpp'

const __dirname = path.dirname(fileURLToPath(import.meta.url))
const modelsDirectory = path.join(__dirname, '..', 'models')

const llama = await getLlama()

const qList = [
  'å¿«æ¨‚çš„ 10 å€‹ç¹é«”ä¸­æ–‡ã€10 å€‹è‹±æ–‡è¿‘ç¾©è©ï¼Œå…¨éƒ¨åˆä½µï¼Œé€—è™Ÿåˆ†éš”ï¼Œä¸è¦ä»»ä½•é™„åŠ è³‡è¨Šï¼Œä¸è¦æ¨™é¡Œï¼Œä¸éœ€è§£é‡‹',
  'æ…¶ç¥çš„ 10 å€‹ç¹é«”ä¸­æ–‡ã€10 å€‹è‹±æ–‡è¿‘ç¾©è©ï¼Œå…¨éƒ¨åˆä½µï¼Œé€—è™Ÿåˆ†éš”ï¼Œä¸è¦ä»»ä½•é™„åŠ è³‡è¨Šï¼Œä¸è¦æ¨™é¡Œï¼Œä¸éœ€è§£é‡‹',
  'ç™¼ç˜‹çš„ 10 å€‹ç¹é«”ä¸­æ–‡ã€10 å€‹è‹±æ–‡è¿‘ç¾©è©ï¼Œå…¨éƒ¨åˆä½µï¼Œé€—è™Ÿåˆ†éš”ï¼Œä¸è¦ä»»ä½•é™„åŠ è³‡è¨Šï¼Œä¸è¦æ¨™é¡Œï¼Œä¸éœ€è§£é‡‹'
]

{
  console.log(chalk.yellow('gemma: '))

  const modelPath = await resolveModelFile(
    'hf_bartowski_gemma-2-2b-it-Q6_K_L.gguf',
    modelsDirectory
  )

  const model = await llama.loadModel({ modelPath })
  const context = await model.createContext()
  const session = new LlamaChatSession({
    contextSequence: context.getSequence()
  })
  console.log()

  for (const q of qList) {
    const a = await session.prompt(q)
    console.log(a)
  }

  await model.dispose()
}

{
  console.log(chalk.yellow('llama: '))

  const modelPath = await resolveModelFile(
    'hf_mradermacher_Llama-3.2-3B-Instruct.Q6_K.gguf',
    modelsDirectory
  )

  const model = await llama.loadModel({ modelPath })
  const context = await model.createContext()
  const session = new LlamaChatSession({
    contextSequence: context.getSequence()
  })
  console.log()

  for (const q of qList) {
    const a = await session.prompt(q)
    console.log(a)
  }

  await model.dispose()
}
```

ä»¥ä¸‹æ˜¯é‹è¡Œçµæœã€‚

gemma:

```text
å¹¸ç¦ã€æ¬£å–œã€æ„‰æ‚…ã€æ­¡æ¨‚ã€é–‹å¿ƒã€æ»¿è¶³ã€å–œæ‚…ã€èˆˆå¥®ã€æ»¿è¶³ã€èˆ’æš¢
joy, happiness, delight, exhilaration, contentment, pleasure, satisfaction, excitement, bliss, comfort

æ…¶ç¥ã€æ­¡æ…¶ã€æ…¶å…¸ã€ç››æœƒã€æ´¾å°ã€èšæœƒã€ç¯€æ…¶ã€ç´€å¿µã€å…¸ç¦®ã€å˜‰å¹´è¯
celebration, festivities, party, gathering, jubilee, festival, commemoration, gala, ceremony, parade, anniversary

ç™¼ç˜‹ã€ç˜‹ç‹‚ã€å¤±æ§ã€æ­‡æ–¯åº•é‡Œã€ç‹‚èºã€è¡å‹•ã€å¤±åºã€å¤±å¸¸ã€æš´èºã€èºç‹‚
madness, frenzy, unhinged, manic, agitated, impulsive, chaotic, disordered, irritable, erratic
```

llama:

```text
å¿«æ¨‚ã€æ„‰æ‚…ã€å¹¸ç¦ã€æ¬£å¿«ã€é«˜èˆˆã€å¿«æ„ã€æ‚…ç›®ã€æ„‰æ‚…ã€å¿«æ¨‚ã€å¿«æš¢
æ…¶ç¥ã€ç¥è³€ã€ç´€å¿µã€ç´€å¿µã€ç¥ç¦ã€æ…¶å…¸ã€ç¯€æ—¥ã€ç¯€æ…¶ã€ç´€å¿µã€ç¥è³€
ç™¼ç˜‹ã€ç™²ç™‡ã€ç˜‹ç‹‚ã€äº¢é€²ã€ç‹‚èºã€ç™¡å‘†ã€ç™²ç™‡ã€ç˜‹ç‹‚ã€äº¢é€²ã€ç‹‚èº
```

å¯ä»¥çœ‹å‡º gemma çš„å›ç­”å“è³ªæ¯” llama å¥½å¾ˆå¤šï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†è®“æˆ‘å€‘ä½¿ç”¨ gemma å¯¦ç¾è¿‘ç¾©è©æœå°‹å§ã€‚

### æ–°å¢ LLM API

## ç¸½çµ ğŸŸ

ä»¥ä¸Šç¨‹å¼ç¢¼å¯ä»¥[åœ¨æ­¤å–å¾—](https://github.com/Codfisher/side-project-cod-toys/tree/feat/kaomoji-add-llm)
