---
description: 元素被卡住怎麼辦？
tags: ["Web", "JS"]
image: https://codlin.me/detached-elements.webp
pubDate: 20260112
draft: true
---

<script setup>
  import VirtualScrollVisualizer from './detached-elements/virtual-scroll-visualizer.vue'
  import VirtualList from './detached-elements/virtual-list.vue'
  import DetachedElements from './detached-elements/detached-elements.vue'
</script>

![detached-elements](/detached-elements.webp){.cover}

# 說好的虛擬呢？記憶體爆炸啦！Σ(ˊДˋ;)

某個專案回報網頁會越來越卡，甚至崩潰。

查了一下是因為記憶體用量像鱈魚的體重一樣越來越高，都不知道是鯨魚還是鱈魚了。

鱈魚：「旁白不要給我亂念劇本 %ლ（´ 口`ლ）%」

## 虛擬滾動

若頁面一次載入太多元素，可能會導致頁面卡頓，甚至崩潰。

這時候我們可以透過虛擬滾動來解決這個問題。

虛擬滾動只會顯示可見區域的元素，同時也會預先載入（Overscan）可見區域外的一些元素，避免快速捲動時出現大量空白。

下方是一個虛擬滾動的互動說明，可以清楚看到可視區域、渲染區域和未渲染區域。

<virtual-scroll-visualizer />

UI 套件可能會有內建虛擬滾動元件，如果沒有可以使用 VueUse 的 `useVirtualList` 來實現。

使用上非常簡單：

<<< ./detached-elements/virtual-list.vue

結果如下：

<virtual-list />

不斷建立、銷毀 DOM 元素，

## 總結 🐟
