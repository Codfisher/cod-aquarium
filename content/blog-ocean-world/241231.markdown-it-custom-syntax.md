---
title: è‡‰è¢«åˆ‡åˆ°äº†æ€éº¼è¾¦ï¼ä¾†è‡ªå®šç¾© markdown èªæ³•å§
description: é¡æ–‡å­—æ›è¡ŒæœƒåŸåœ°è®Šç‚ºä¸€å¨äº‚ç¢¼ï¼Œè©²æ€éº¼è¾¦å‘¢ï¼Ÿ(PĞ”`qï½¡)
tags: ['markdown-it']
image: https://codlin.me/markdown-it-custom-syntax.webp
date: 20241231
draft: true
---

# è‡‰è¢«åˆ‡åˆ°äº†æ€éº¼è¾¦ï¼ä¾†è‡ªå®šç¾© markdown èªæ³•å§

![markdown-it-custom-syntax](/markdown-it-custom-syntax.webp)

æ®µè½æ–‡å­—å¤ªé•·æ™‚ï¼Œåœ¨å¥å°¾çš„é¡æ–‡å­—å¾ˆå®¹æ˜“è¢«æ›è¡Œï¼Œåƒé€™æ¨£ (ï¼ƒÂ°
Ğ”Â°)

ä¸€ç§’ä¾¿è®Šæˆäº†ä¸€å¨ä¸çŸ¥æ‰€äº‘çš„äº‚ç¢¼ã€‚%( Â´â€¢Ì¥Ì¥Ì¥ Ï‰ â€¢Ì¥Ì¥Ì¥` )%

åŸæœ¬è§£æ³•åƒé€™æ¨£ `<span class="text-nowrap">(>'-'<)</span>`

æŠŠé¡æ–‡å­—ç”¨ HTML åŒ…èµ·ä¾†ï¼Œé›–ç„¶æœ‰æ•ˆï¼Œä½†æ˜¯å¯¦åœ¨ä¸å¤ ~~æ‡¶äºº~~å„ªé›…ã€‚%( ãƒ»à¸´Ï‰ãƒ»à¸´)%

æ—¢ç„¶æ­¤éƒ¨è½æ ¼åŸºæ–¼ markdown å¯«ä½œï¼Œé‚£éº¼å°±ä¾†èª¿æ•´ä¸€ä¸‹ markdown-it å§ï¼%â—(â‰§âˆ€â‰¦)â—Ÿ%

## è‡ªå®šç¾©èªæ³•

markdown-it è¨­è¨ˆä¹‹åˆå°±è€ƒæ…®åˆ°äº†æ“´å±•æ€§ï¼Œè‡ªå®šç¾©èªæ³•å°èœä¸€ç¢Ÿã€‚

æŸ¥äº†ä¸€åœˆ markdown é‚„æ²’è¢«ä½¿ç”¨çš„ç¬¦è™Ÿï¼Œçœ‹èµ·ä¾† `%` é‚„ä¸éŒ¯ï¼Œæ‰€ä»¥é è¨ˆä½¿ç”¨ % ç¬¦è™Ÿå»ºç«‹ä¸€å€‹æ±ºä¸æ›è¡Œçš„å€å¡Šã€‚

ä¹Ÿå°±æ˜¯ `%(>'-'<)%` è‡ªå‹•è®Šç‚º `<span class="text-nowrap">(>'-'<)</span>`

é¦–å…ˆå»ºç«‹ä¸€å€‹ pluginã€‚

`.vitepress\plugin\markdown-it-nowrap.ts`

```ts
import type { Token } from 'markdown-it'
import type MarkdownIt from 'markdown-it'

type RuleInline = Parameters<
  MarkdownIt['inline']['ruler']['before']
>[2]

/** ä½¿ç”¨ % åŒ…åœæ–‡å­—ï¼Œå³å¯å»ºç«‹ä¸æ›è¡Œçš„å…ƒç´ 
 * https://vitepress.dev/guide/markdown#advanced-configuration
 *
 * @param md
 */
export function markdownItNowrap(md: MarkdownIt) {
  /** è§£æ % å€å¡Š */
  const parsePercentSyntax: RuleInline = (state, silent) => {
    const start = state.pos
    const marker = '%'

    // å¦‚æœä¸æ˜¯ %ï¼Œç›´æ¥è·³é
    if (state.src[start] !== marker) {
      return false
    }

    const end = state.src.indexOf(marker, start + 1)
    if (end === -1) {
      return false
    }

    if (!silent) {
      const token = state.push('nowrap_span', '', 0)
      token.content = state.src.slice(start + 1, end).trim()
    }

    state.pos = end + 1
    return true
  }

  /** æ¸²æŸ“ nowrap_span å€å¡Šå…§å®¹ */
  function renderPercentSyntax(tokens: Token[], idx: number) {
    if (!tokens[idx]?.content) {
      return ''
    }

    return `<span class="text-nowrap">${tokens[idx].content}</span>`
  }

  // æ’ä»¶è¨»å†Š
  md.inline.ruler.before('emphasis', 'nowrap_span', parsePercentSyntax)
  md.renderer.rules.nowrap_span = renderPercentSyntax
}
```

æ¥è‘—ä¾ç…§[æ–‡ä»¶æŒ‡ç¤º](https://vitepress.dev/guide/markdown#advanced-configuration)ï¼Œåœ¨ vitepress ä½¿ç”¨ pluginã€‚

`.vitepress\config.mts`

```ts
// ...

// https://vitepress.dev/reference/site-config
export default ({ mode }: { mode: string }) => {
  // ...

  return withMermaid({
    title: 'é±ˆé­šçš„é­šç¼¸',
    // ...

    markdown: {
      lineNumbers: true,
      config(md) {
        md.use((md) => markdownItBaseImg(md, mode))
        md.use(markdownItNowrap) // [!code ++]
      },
    },

    // ...
  })
}
```

å®Œå·¥ï¼

ç¾åœ¨è¢« % åŒ…åœçš„æ–‡å­—éƒ½æœƒè‡ªå‹•è®Šæˆå¸¶æœ‰ text-nowrap class çš„ `span` äº†ï¼

![nowrap-span](/markdown-it-custom-syntax/nowrap-span.png)

å¥½åƒå¤ªå¿«æƒ¹ï¼Œè—‰é€™å€‹æ©Ÿæœƒä¾†å¥½å¥½ç ”ç©¶ä¸€ä¸‹ markdown-it å¥½æƒ¹ã€‚

## markdown-it èªæ³•

## ç¸½çµ ğŸŸ
