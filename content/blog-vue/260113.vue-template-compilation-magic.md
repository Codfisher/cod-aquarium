---
description: å¸¸è½åˆ¥äººèªª Vue template æœ‰ç·¨è­¯é­”æ³•ï¼Œä¾†ä»”ç´°çœ‹çœ‹åˆ°åº•å·®åœ¨å“ªå§ã€‚
tags: ["Vue"]
image: https://codlin.me/vue-template-compilation-magic.webp
pubDate: 20260113
---

<script setup>
  import PerfComparison from './vue-template-compilation-magic/perf-comparison.vue'
</script>

![vue-template-compilation-magic](/vue-template-compilation-magic.webp){.cover}

# Vue template ç·¨è­¯é­”æ³•

å’ŒåŒäº‹è¨è«–åˆ° Vue templateã€`h()` çš„ä½¿ç”¨æƒ…å¢ƒå‰›å¥½æœ€è¿‘ä½¿ç”¨ Nuxt UI ä¹Ÿå¸¸ä½¿ç”¨ `h()` ä¾†æ¸²æŸ“å…§å®¹ã€‚

åœ¨é«˜åº¦å‹•æ…‹çš„å ´æ™¯ä¸‹ï¼Œä½¿ç”¨ `h()` æœƒæ›´åŠ æ–¹ä¾¿ï¼Œå…ˆå‰ä¹Ÿæœ‰[æ–‡ç« ](/blog-vue/vue-h-function-makes-quasar-dialog-easier-to-reuse.html)æåˆ°ç›¸é—œæ‡‰ç”¨ã€‚

::: tip ç”šéº¼æ˜¯ `h()`
`h()` æ˜¯ Vue çš„æ¸²æŸ“å‡½å¼ï¼Œè©³ç´°èªªæ˜å¯ä»¥[çœ‹çœ‹å®˜æ–¹æ–‡ä»¶](https://vuejs.org/guide/extras/render-function.html)
:::

ä½†æ˜¯ `h()` ä¸æœƒæœ‰ template çš„ç·¨è­¯æœ€ä½³åŒ–ï¼Œæ‰€ä»¥æ²’æœ‰ç‰¹åˆ¥éœ€æ±‚çš„æƒ…å¢ƒä¸‹ï¼Œé‚„æ˜¯å»ºè­°ä½¿ç”¨ templateã€‚

[å®˜æ–¹æ–‡ä»¶](https://vuejs.org/guide/essentials/template-syntax.html)æåˆ°ï¼š

> If you are familiar with Virtual DOM concepts and prefer the raw power of JavaScript, you can also directly write render functions instead of templates, with optional JSX support. However, do note that they do not enjoy the same level of compile-time optimizations as templates.

è½èªªæ­¸è½èªªï¼Œ~~å¿è€…é¾œå¿è€…~~ï¼Œå¾ä¾†æ²’æœ‰ä»”ç´°ç ”ç©¶éåˆ°åº•å·®åœ¨å“ªï¼Œè¶é€™æ¬¡æ©Ÿæœƒä¾†çœ‹çœ‹å§ã€‚%( Â´ â–½ ` )ï¾‰%

## é€Ÿåº¦çœŸçš„æœ‰å·®ï¼Ÿ

å£èªªç„¡æ†‘ï¼Œç›´æ¥å¯«å€‹ç¯„ä¾‹æ¯”è¼ƒçœ‹çœ‹å§ã€‚%( Â´ â–½ ` )ï¾‰%

ç”±æ–¼ JSX èˆ‡ `h()` æ¦‚å¿µç›¸è¿‘ï¼Œæ‰€ä»¥é€™è£¡åªæ¯”è¼ƒ template èˆ‡ `h()` çš„å·®ç•°ã€‚

åˆ†åˆ¥å»ºç«‹ template èˆ‡ `h()` çš„ç¯„ä¾‹ï¼Œ

`list-template.vue`

<<< ./vue-template-compilation-magic/list-template.vue

`list-h.ts`

<<< ./vue-template-compilation-magic/list-h.ts

æ¥è‘—å¼•ç”¨ä»¥ä¸Šå…ƒä»¶ä¸¦è¨ˆæ™‚æ›´æ–°è€—æ™‚ï¼Œç‚ºäº†è®“å·®è·æ˜é¡¯ä¸€é»ï¼Œè®“å…§å®¹é‡è¤‡ 2000 æ¬¡ã€‚

<<< ./vue-template-compilation-magic/perf-comparison.vue

ç¾åœ¨å¤§å®¶å¯ä»¥æŒ‰ä¸‹é–‹å§‹æŒ‰éˆ•ä¸¦åˆ‡æ›æ¨¡å¼ï¼Œçœ‹çœ‹è€—æ™‚æœ‰ç”šéº¼å·®ç•°ã€‚

<perf-comparison />

åœ¨æˆ‘çš„é›»è…¦ä¸Šï¼Œtemplate å¤§ç´„åœ¨ 5 msï¼Œ`h()` å¤§ç´„åœ¨ 20 msã€‚

ä¸åŒè£ç½®çµæœæœƒä¸ä¸€æ¨£ï¼Œä¸éå¾ˆæ˜é¡¯å¯ä»¥çœ‹å‡º template çš„é€Ÿåº¦æœƒæ¯” `h()` å¿«ã€‚

ä¸éé€šå¸¸ä¸æœƒç”¢ç”Ÿå¤§é‡å…ƒç´ ï¼Œæ‰€ä»¥å¹³æ™‚å®Œå…¨çœ‹ä¸å‡ºå·®åˆ¥ï¼Œä¸éç•¶ä½ çš„ç¶²é é‡ç´šå¢åŠ ï¼Œç©å°‘æˆå¤šï¼Œæ€§èƒ½è² æ“”è‡ªç„¶æœƒå¢åŠ ã€‚

## ç·¨è­¯çµæœ

è¦æ€éº¼æ¯”è¼ƒå·®ç•°å‘¢ï¼Ÿå¯¦éš›ä¸Šä¸ç®¡æ˜¯ template é‚„æ˜¯ `h()`ï¼Œæœ€çµ‚ Vue éƒ½æœƒç·¨è­¯æˆ JS ç¨‹å¼ç¢¼ï¼Œç”¨ä»¥ç”¢ç”Ÿ Virtual DOM (VNode)

Virtual DOM éƒ¨åˆ†ä¸æ˜¯æœ¬æ–‡çš„é‡é»ï¼Œæœªä¾†æœ‰èˆˆè¶£æ™‚å†ä¾†ç ”ç©¶çœ‹çœ‹ï¼Œæ‰€ä»¥é€™æ¬¡ä¾†æ¯”å°ç·¨è­¯å¾Œçš„ç”¢ç‰©ï¼Œçœ‹çœ‹æœ‰ç”šéº¼å·®åˆ¥å§ã€‚

é€™è£¡ä½¿ç”¨ [Vue SFC Playground](https://play.vuejs.org/) çš„ PROD æ¨¡å¼ï¼Œä¾†æ¯”è¼ƒ templateã€`h()` èˆ‡ JSX çš„ç·¨è­¯å…§å®¹ã€‚

## ç¸½çµ ğŸŸ
