---
title: Vue æ³›å‹å…ƒä»¶ï¼Œè®“ TypeScript æ›´ç²¾ç¢º
description: Vue 3.3 çµ‚æ–¼æ–°å¢äº†æ³›å‹å…ƒä»¶ï¼ˆGeneric Componentï¼‰ï¼Œå¯ä»¥åœ¨ TypeScript ç’°å¢ƒä¸­å¾—åˆ°æ›´æº–ç¢ºçš„å‹åˆ¥æç¤ºäº†ï¼Ë‹( Â° â–½ã€Â° )
tags: ['Vue']
date: 240417
---

# Vue æ³›å‹å…ƒä»¶ï¼Œè®“ TypeScript æ›´ç²¾ç¢º

![vue-generic-components.jpg](/vue-generic-components.png)

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é±ˆé­šã€‚ï¼ˆï¼¾âˆ€ï¼¾â—ï¼‰ï¾‰ï½¼

Vue 3.3 çµ‚æ–¼æ–°å¢äº†æ³›å‹å…ƒä»¶ï¼ˆGeneric Componentï¼‰ï¼Œå¯ä»¥åœ¨ TypeScript ç’°å¢ƒä¸­å¾—åˆ°æ›´æº–ç¢ºçš„å‹åˆ¥æç¤ºäº†ï¼Ë‹( Â° â–½ã€Â° )

é€™å€‹æ³›å‹å…ƒä»¶èˆ‡ TypeScript çš„ Generic æ˜¯åŒä¸€å€‹æ¦‚å¿µï¼Œä¸çŸ¥é“ Generic çš„æœ‹å‹å¯ä»¥å…ˆä¾†ä¾†[è¤‡ç¿’ä¸€ä¸‹](https://www.typescriptlang.org/docs/handbook/2/generics.html)ã€‚

ç”šéº¼ï¼Ÿä½ èªªä½ æ²’æœ‰ä½¿ç”¨ TypeScriptï¼ŸæŠ±æ­‰æµªè²»æ‚¨ 5 ç§’é˜ï¼Œå¯ä»¥ä¸Šä¸€é äº†ã€‚ï¼ˆï¼äººï¼œï¼›ï¼‰

æˆ–è€…åœ¨é›¢é–‹å‰è·¯é[æ–‡æª”](https://vuejs.org/guide/typescript/overview#generic-components)æ¹Šå€‹ç†±é¬§ã€‚( â€¢Ì€ Ï‰ â€¢Ì )y

æœ‰ä½¿ç”¨ TypeScript çš„æœ‹å‹å°±è®“æˆ‘å€‘ä¸€èµ·ç¹¼çºŒçœ‹ä¸‹å»å§ã€‚áƒš(â•¹â—¡â•¹áƒš)

## ä¾†å€‹ select

å‡è¨­æˆ‘éœ€è¦ä¸€å€‹ç¶å®šç‰©ä»¶çš„ selectï¼Œæœ€å¸¸è¦‹çš„å•é¡Œå°±æ˜¯ modelValue åªèƒ½ anyï¼Œå¦‚ä¸‹ï¼š

`SelectAny.vue`

```ts
<script setup lang="ts">
...ï¼ˆçœç•¥å…¶ä»–ç¨‹å¼ç¢¼ï¼‰

interface Prop {
  modelValue: any;
  label?: string;
  options: any[];
  optionLabel?: (option: any) => string;
  /** æ˜¯å¦å¤šé¸ */
  multiple?: boolean;
}

...
</script>
...
```

### v-model é€™å€‹ç³–

å¿˜è¨˜å…ƒä»¶æ€éº¼å¯¦ç¾ v-model çš„æœ‹å‹å€‘åˆ¥æ“”å¿ƒï¼Œè®“æˆ‘å€‘è¤‡ç¿’ä¸€ä¸‹ã€‚

<aside>
ğŸ’¡ Vue 3.4 é–‹å§‹å¯ä»¥ä½¿ç”¨ defineModelï¼Œä¸éèˆ‡æ­¤æ–‡ä¸»é¡Œç„¡é—œï¼Œæ‰€ä»¥æˆ‘å€‘å…ˆä½¿ç”¨ç¶“å…¸å¯«æ³•ã€‚

</aside>

v-model åªæ˜¯ä¸€å€‹èªæ³•ç³–ï¼Œå¯¦éš›ä¸Šçš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼ˆ[æ–‡æª”](https://vuejs.org/guide/components/v-model.html#under-the-hood)ï¼‰ã€‚

```ts
<script setup>
const props = defineProps(['modelValue'])
const emit = defineEmits(['update:modelValue'])
</script>

<template>
  <input
    :value="props.modelValue"
    @input="emit('update:modelValue', $event.target.value)"
  />
</template>
```

modelValue å°±æ˜¯ç”¨ä¾†è¡¨ç¤ºé è¨­ç¶å®šå€¼çš„è®Šæ•¸ï¼Œè®“æˆ‘å€‘å›åˆ°å‰›å‰›çš„ anyã€‚

æ‰€ä»¥ç¾åœ¨å°±ç®—æˆ‘å€‘çš„ modelValue èˆ‡ options çš„å‹åˆ¥ä¸åŒï¼Œæˆ–è€…  multiple ç‚º trueï¼Œè€Œ modelValue å»æ²’æœ‰çµ¦çŸ©é™£æ™‚ï¼Œéƒ½ä¸æœƒæœ‰ä»»ä½•éŒ¯èª¤æç¤ºã€‚

```ts
<script setup lang="ts">
...
import SelectAny from './SelectAny.vue';

const options: User[] = [
  { name: 'é±ˆé­š', price: 10000 },
  { name: 'ç« é­š', price: 100 }
];

const anyDatum = ref<{ age: number }>();
const seletedAnyDatum = ref<User>();
</script>

<template>
 <!-- anyDatum èˆ‡ option å‹åˆ¥ä¸åŒ -->
  <SelectAny v-model="anyDatum" :options="options" :option-label="getLabel" />
 
 <!-- modelValue æ²’æœ‰çµ¦çŸ©é™£ -->
  <SelectAny v-model="seletedAnyDatum" multiple :options="options" :option-label="getLabel" />
</template>

```

ç•¢ç«Ÿæ˜¯ any å˜›ã€‚(Ë˜ï½¥_ï½¥Ë˜)

## åŠ ä¸Šæ³›å‹

å¦‚æœåŠ ä¸Šå…ƒä»¶æ³›å‹å°±ä¸æœƒæœ‰ä»¥ä¸Šå•é¡Œäº†ã€‚

`SelectGeneric.vue`

```ts
<script 
  setup 
  lang="ts" 
  generic="ModelValue, Multiple extends boolean"
>
...

interface Prop {
  modelValue: Multiple extends true ? ModelValue[] : ModelValue;
  label?: string;
  options: ModelValue[];
  optionLabel?: (option: any) => string;
  /** æ˜¯å¦å¤šé¸ */
  multiple?: Multiple;
}

...
</script>
...
```

é™¤äº† modelValueã€options æœ‰æ³›å‹ ModelValue å¤–ï¼Œæˆ‘å€‘é‚„åŠ ä¸Š multiple åˆ¤æ–·ï¼Œå¦‚æœç‚º trueï¼Œå‰‡ modelValue ç‚º ModelValue[]ï¼Œå¦å‰‡ç‚º ModelValueã€‚

é€™æ¨£å­å°±å¯ä»¥é”æˆä»¥ä¸‹æ•ˆæœï¼š

- modelValue èˆ‡ options å‹åˆ¥ä¸åŒæ™‚è­¦å‘Šï¼Œ
- multiple ç‚º true æ™‚ï¼Œå¦‚æœ modelValue æ²’æœ‰æä¾›çŸ©é™£æ™‚ç™¼å‡ºè­¦å‘Šã€‚

```ts
<script setup lang="ts">
...
import SelectGeneric from './SelectGeneric.vue';

const options: User[] = [
  { name: 'é±ˆé­š', price: 10000 },
  { name: 'ç« é­š', price: 100 }
];

const anyDatum = ref<{ age: number }>();
const seletedGenericDatum = ref<User>();
const seletedGenericData = ref<User[]>([]);
</script>

<template>
  <!-- Type '{ age: number; }' is not assignable to type 'User | User[]'.ts(2322) -->
  <SelectGeneric v-model="anyDatum" :options="options" :option-label="getLabel" />

 <!-- Type 'User' is not assignable to type 'User[]'.ts(2322) -->
  <SelectGeneric v-model="seletedGenericDatum" multiple :options="options" :option-label="getLabel" />
   
  <!-- æ­£ç¢º -->
  <SelectGeneric v-model="seletedGenericData" multiple :options="options" :option-label="getLabel" />
</template>

```

TypeScript æˆåŠŸé‡è¿”å…‰æ¦®ã€‚o((>Ï‰< ))o

æ–‡ç« åˆ°æ­¤çµæŸäº†ï¼Œæ„Ÿè¬æ‚¨çš„é–±è®€ï¼Œä»¥ä¸Šç¨‹å¼ç¢¼å¯ä»¥[åœ¨æ­¤](https://play.vuejs.org/#eNrtWM1u20YQfpUxL6INRWrQnlRJRpoYRYLmB3Xai+gDLS1lptSS4C5lGwIPvcVAgBQ9FUEPPaQ9tCiM9lSg6dvEbn3KK3R2lrsiKdlJHOWQID4Y5OzMzjezs9+MOHOuJUlrmjGn43TFMA0TCYLJLIHI5+Oe50jhOX2Ph5MkTiXMIGUB5BCk8QQaaNb4tLT2lWCpXWy15WHChFKwKtssYkN5jR9aHStRGEqbafnnjLM0HNa0C6mx8Pgw5kJCnMgQHzoEY7ADPRh4HBAW9yesA42zPx6e/f6k0YQEjVFw9SP8g7xZUfr3t5/qSpB7fIf8BBkfKh8wZvILf5dFrvapXa7DTG2VYvZSXqBpqW3RFrcwMH1+eMOX2QTxYS67M/DH6Idnk12VvL67jupaU2C0ko0wOWUD5Upr1fSKtCzXPUfTLykOdvruYEcpd9u6EvDc8UWySRL5kuEbQHfvat+eWbeNbySdH+z0yiQesQgrpwbfc6BTHBEuFk9z4ZVIJRRXTG5xqU0Aak7h7NHxf78+hbtk9uLZw9M/vz/98QjubxcrL54dzYEl/dNHR8//eQzXZRrByePj53//fPL0ydm3f3XbyfnYzSGtDPTtLJJhErG3hHcx15PC4eXxJ/3ZbKEG81zj0BGmC7EWpVWvDHORFxCXi/ZNkm2KFD2EAeoEfiQYMRfg3wK+xSI670QuCGEFRbIMWrlULoFqeWLfqBzQW7vEAgvVUWGeV6wQG+Ylav8VgvZXEPPyEH0bYSUpThNbJbJsEI5bD0TMsZ9SO/CcYTxJwoilutbQdUc3CrXmR1G8f4tkMs0Y9SKy2WPDb5bIH4gDJfOceylDyp5iids16acYg17e2r7DDvDZLmKisgi1L1j8kok4yhRGrfZZxkcIu6RHaG9Sgw75+L7YOpCMCxOUAqo0dUf1HGzP1y8IfQ7349YnZIdtErNYmQheYyppgoy/9iNMFuz7crjXBJX4DM+uPq+gHZcsDfwhg3tpnGhMVEq0QUf1aNQD9IYFsdkBIVMMmER2ykCdgRoLjIiKB3XtTIAK69Drl43bGxtw+sPxyXe/6LqGjTa5LgoVrXfjOGI+1yODbtqJgtiD/VDu3WCBj7rCHbEg5EyBF131H5t8U4dRAmOxEIxb23fvtDSWMDg0K3RWxn8H8Mhp5xHK8/X5iMEmoUQMenELX0SXvDWyZIT135knr9GBwVRnUQEbNEpLOypfxYhTnaZu8lCSjovb+UXuyEMYgLumhOtmslIvlE0NDS8CwkdwFGDip4K5tVjJXDvVG6qUtkzUhSM7uRUbbpoHDEifMw1xNbXqbEeB65HKrUSlHdpMEBiqUpdMmuDSGREQlWt3SWJtgWsb2iPHU8dTYYm+fpCX50LLfz17FdySH5UINaLHAZWYzQf0ej1o6Ow16slRXpYkY22tsoVC9rJBchROTSuja2Y6N73g7Ubu1XJFt/Q075mKlIeYbsv/lBFF6gYBytbWzIudA9BU1z2aBnFq+wGEZmCnzkC72cWSNf5QmJVvmL1fOaajcNDWMhNbW2MtuqgOut44Fn7WlGhP2Wnq04Rk6Y/ex9oGRbdtoTRtawWkecZHwrCK53gK19tizQW3VJKbMIeGv8pQzb6+lGPLliunWgN3tVxbBv2e8G6VAapcsYnkiGdqOZnuwXtKzLWwqmwMvliSeIJ3PqHrvT4Q+cVE/q7QOH3vakmB7M0OiGLnjEmfxmZequz1pybDVSQqvjbpr0Aky538f3lI90M=)å–å¾—ã€‚

æœ‰å…¶ä»–æƒ³æ³•è«‹ä¸åå‘Šè¨´æˆ‘ï¼Œé±ˆé­šæ„Ÿè¬æ‚¨ï¼(oã‚œâ–½ã‚œ)oâ˜†
