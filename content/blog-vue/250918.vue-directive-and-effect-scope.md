---
description: Directive å…§æ²’æœ‰æ²’æœ‰è‡ªå‹•è§£é™¤çš„é­”æ³•å‘¦
tags: ['Vue']
image: https://codlin.me/img.webp
pubDate: 202
---

![img](/img.webp){.cover}

# è‡ªå‹•è§£é™¤çš„é­”æ³•å‘¢ï¼ŸVue Directive å’Œ Effect Scope

Vue é™¤äº†å…ƒä»¶èˆ‡ Composition API å¤–ï¼Œé‚„æœ‰å¾ˆæ–¹ä¾¿çš„è‡ªå®šç¾© [Directive](https://cn.vuejs.org/guide/reusability/custom-directives)ã€‚

Directive è£¡é¢èƒ½ä¸èƒ½ä½¿ç”¨ VueUse å‘¢ï¼Ÿç•¶ç„¶å¯ä»¥å•¦ï¼Œå“ªæ¬¡ä¸è¡Œäº†ï¼Œæ‰€ä»¥å¯ä»¥é€™æ¨£å¯«ï¼š

```ts
export const vTest: Directive = {
  mounted(el, binding) {
    if (!(el instanceof HTMLElement)) {
      return
    }

    const bounding = reactive(useElementBounding(el))

    watch(bounding, (value) => {
      console.log('bounding: ', value)
    }, { deep: true })
  },
}
```

ç•¶å…ƒç´ å°ºå¯¸è®ŠåŒ–æ™‚ï¼Œ`watch` æœƒé †åˆ©è§¸ç™¼ã€‚

## ç¸½çµ ğŸŸ
