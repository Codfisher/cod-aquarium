---
title: Vue çš„ shallowRef æ˜¯å•¥ï¼Ÿå’Œ ref æœ‰ç”šéº¼å€åˆ¥ï¼Ÿ
description: 
tags: ['vue']
image: https://codlin.me/vue-shallow-ref-and-ref.webp
date: 20241007

head:
  meta:
    - name: 'keywords'
      content: 'cod, lin'
---

# Vue çš„ shallowRef æ˜¯å•¥ï¼Ÿå’Œ ref æœ‰ç”šéº¼å€åˆ¥ï¼Ÿ

![vue-shallow-ref-and-ref](/vue-shallow-ref-and-ref.webp){height="600"}

ä½¿ç”¨ Vue çš„æœ‹å‹å€‘ä¸€å®šçŸ¥é“ `ref` æ˜¯å•¥ã€‚Ô…( Ë˜Ï‰Ë˜Ô…)

ä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰æ³¨æ„åˆ° Vue é‚„æœ‰ä¸€å€‹åå­—æœ‰é»åƒï¼Œå«åš `shallowRef` çš„ APIã€‚

æ‰€ä»¥ `shallowRef` æ˜¯å•¥ï¼Ÿå’Œ ref æœ‰ç”šéº¼å€åˆ¥å‘¢ï¼Ÿ

é¡§åæ€ç¾©ï¼Œç°¡å–®ä¾†èªª `shallowRef` åªå°æ·ºå±¤ï¼ˆç¬¬ä¸€å±¤ï¼‰çš„å€¼é€²è¡ŒéŸ¿æ‡‰å¼è™•ç†ã€‚

ä¹Ÿå°±æ˜¯èªªè€ƒæ…®ä»¥ä¸‹ç¨‹å¼ç¢¼ã€‚

```vue
<script setup>
import { shallowRef } from 'vue'

const shallowData = shallowRef({ cod: [] })

async function updateShallowData() {
  shallowData.value.cod.push('fish')
}
</script>

<template>
  <div>
    shallowData: {{ shallowData.cod.length }}
  </div>
  <button @click="updateShallowData">
    æ›´æ–°è³‡æ–™
  </button>
</template>
```

[ç¨‹å¼ç¢¼å‚³é€é–€](https://play.vuejs.org/#eNp9kk1OwzAQha8y8qZFQukCVlVA/C5gAQjYYRbBmTQGx7ZiuxRFWXMDJMQlkOBMFcdg4tBSBGJnz7z3/I3thu1am0wDsjFLnail9eDQB7vNtaysqT004MpMKXN/jgW0UNSmggE5BlxzLYx25OgFB5nPYGtFPmxAmHwMV9fQrnXyzD1oAUXQwkujIdg883jx7R6uQcM1rAYm00wFTCgnscGVw0EhXTmgtJbrdNQjEyxtPFZWUR7tANJcTuPiR9gYmuU4MbyLVagnvoSWAsk3WhjTm+A9Qe4IJcXdFme/aDn7OmH+8j5/ev14e5w/PfchvZfa6WiJxdaZd3RhhZwkt85ouvI4LGfCVFYqrE9tdy2OM+LskzmLpx3Hmq8Dri/qokRx90f91s26GmdnNTqsp8jZsuezeoK+bx9enOCM1stmZfKgSP1P8xydUaFj7GV7QeeEvaKLtEfx40g9uXSHM4/aLYbqQDtlG/Wc0S/a/2f0b9yNZDP66NVZ+wk04O8u)

ç•¶æˆ‘å€‘é»æ“Šã€Œæ›´æ–°è³‡æ–™ã€æŒ‰éˆ•æ™‚ï¼Œ`shallowData.cod` çš„é•·åº¦ä¸æœƒè¢«æ›´æ–°ï¼Œæ–‡å­—æ°¸é æœƒä¿æŒ shallowData: 0ã€‚

é™¤é `updateShallowData` çš„éƒ¨ä»½æ”¹æˆï¼š

```ts
async function updateShallowData() {
  const cod = [...shallowData.value.cod, 'fish'];
  shallowData.value = { cod }
}
```

é€™æ¨£å°±æœƒå› ç‚ºç¬¬ä¸€å±¤ï¼Œä¹Ÿå°±æ˜¯ `shallowData.value` çš„å€¼è¢«æ”¹è®Šï¼Œæ‰æœƒè§¸ç™¼éŸ¿æ‡‰ï¼Œè®“ç•«é¢æ›´æ–°ã€‚

çœ‹åˆ°é€™è£¡ä½ å¯èƒ½æœƒæƒ³ã€Œæ€éº¼æå¾—æ›´éº»ç…©äº†ï¼Ÿáƒšï¼ˆÂ´å£`áƒšï¼‰ã€

åˆ¥æ€¥åˆ¥æ€¥ï¼Œè®“æˆ‘å€‘ä¾†çœ‹çœ‹ç‚ºç”šéº¼éœ€è¦ `shallowRef` é€™å€‹ç©æ„æ€ã€‚

## shallowRef çš„ä½¿ç”¨å ´æ™¯

åªå°ç¬¬ä¸€å±¤çš„å€¼é€²è¡ŒéŸ¿æ‡‰å¼è™•ç†ï¼Œæœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ã€Œæ€§èƒ½è€ƒé‡ã€ã€‚

## ç¸½çµ ğŸŸ
